execute if score @s unfinite-freecam.settings matches 101 run data merge storage unfinite_freecam {settings:{"enable_freecam":1b}}
execute if score @s unfinite-freecam.settings matches 102 run data merge storage unfinite_freecam {settings:{"enable_freecam":0b}}
execute if score @s unfinite-freecam.settings matches 102 run execute as @a run trigger unfinite-freecam add 0

execute if score @s unfinite-freecam.settings matches 201 run data merge storage unfinite_freecam {settings:{"distance":16}}
execute if score @s unfinite-freecam.settings matches 202 run data merge storage unfinite_freecam {settings:{"distance":32}}
execute if score @s unfinite-freecam.settings matches 203 run data merge storage unfinite_freecam {settings:{"distance":64}}
execute if score @s unfinite-freecam.settings matches 204 run data merge storage unfinite_freecam {settings:{"distance":128}}
execute if score @s unfinite-freecam.settings matches 205 run data merge storage unfinite_freecam {settings:{"distance":256}}

execute if score @s unfinite-freecam.settings matches 301 run data merge storage unfinite_freecam {settings:{"block_spectating":1b}}
execute if score @s unfinite-freecam.settings matches 302 run data merge storage unfinite_freecam {settings:{"block_spectating":0b}}

execute if score @s unfinite-freecam.settings matches 401 run data merge storage unfinite_freecam {settings:{"block_darkness":1b}}
execute if score @s unfinite-freecam.settings matches 402 run data merge storage unfinite_freecam {settings:{"block_darkness":0b}}

execute if score @s unfinite-freecam.settings matches 501 run data merge storage unfinite_freecam {settings:{"nametag":1b}}
execute if score @s unfinite-freecam.settings matches 502 run data merge storage unfinite_freecam {settings:{"nametag":0b}}
execute if score @s unfinite-freecam.settings matches 501 run execute as @e[type=mannequin,tag=unfinite_freecam_dummy,tag=!no_name] run data merge entity @s {CustomNameVisible:1b}
execute if score @s unfinite-freecam.settings matches 502 run execute as @e[type=mannequin,tag=unfinite_freecam_dummy,tag=!no_name] run data merge entity @s {CustomNameVisible:0b}

execute if score @s unfinite-freecam.settings matches 601 run data merge storage unfinite_freecam {settings:{"waypoints":1b}}
execute if score @s unfinite-freecam.settings matches 602 run data merge storage unfinite_freecam {settings:{"waypoints":0b}}
execute if score @s unfinite-freecam.settings matches 601 run execute as @e[type=minecraft:mannequin,tag=unfinite_freecam_dummy] run attribute @s minecraft:waypoint_transmit_range base set 60000000
execute if score @s unfinite-freecam.settings matches 602 run execute as @e[type=minecraft:mannequin,tag=unfinite_freecam_dummy] run attribute @s minecraft:waypoint_transmit_range base set 0

execute if score @s unfinite-freecam.settings matches 701 run data merge storage unfinite_freecam {settings:{"vehicle_move":1b}}
execute if score @s unfinite-freecam.settings matches 702 run data merge storage unfinite_freecam {settings:{"vehicle_move":0b}}

execute if data storage unfinite_freecam {settings:{"enable_freecam":1b}} run data modify storage unfinite_freecam settings.dialog.buttons[0] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Trigger Freecam:","color": "aqua"},{"text":" ‚úî","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled, all players are allowed to use:\n"},{"color":"gold","text":"/trigger unfinite-freecam"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled all players are allowed to use:\n"},{"color":"gold","text":"/trigger unfinite-freecam"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 102"}}
execute if data storage unfinite_freecam {settings:{"enable_freecam":0b}} run data modify storage unfinite_freecam settings.dialog.buttons[0] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Trigger Freecam:","color": "aqua"},{"text":" ‚ùå","color": "red"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled, all players are allowed to use:\n"},{"color":"gold","text":"/trigger unfinite-freecam"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled all players are allowed to use:\n"},{"color":"gold","text":"/trigger unfinite-freecam"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 101"}}

execute if data storage unfinite_freecam {settings:{"distance":16}} run data modify storage unfinite_freecam settings.dialog.buttons[1] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Freecam Radius:","color": "aqua"},{"text":" 16","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Freecam-Range in blocks\n"},{"color":"dark_gray","text":"(No effect on external use)"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 202"}}
execute if data storage unfinite_freecam {settings:{"distance":32}} run data modify storage unfinite_freecam settings.dialog.buttons[1] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Freecam Radius:","color": "aqua"},{"text":" 32","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Freecam-Range in blocks\n"},{"color":"dark_gray","text":"(No effect on external use)"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 203"}}
execute if data storage unfinite_freecam {settings:{"distance":64}} run data modify storage unfinite_freecam settings.dialog.buttons[1] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Freecam Radius:","color": "aqua"},{"text":" 64","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Freecam-Range in blocks\n"},{"color":"dark_gray","text":"(No effect on external use)"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 204"}}
execute if data storage unfinite_freecam {settings:{"distance":128}} run data modify storage unfinite_freecam settings.dialog.buttons[1] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Freecam Radius:","color": "aqua"},{"text":" 128","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Freecam-Range in blocks\n"},{"color":"dark_gray","text":"(No effect on external use)"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 205"}}
execute if data storage unfinite_freecam {settings:{"distance":256}} run data modify storage unfinite_freecam settings.dialog.buttons[1] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Freecam Radius:","color": "aqua"},{"text":" 256","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Freecam-Range in blocks\n"},{"color":"dark_gray","text":"(No effect on external use)"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 201"}}

execute if data storage unfinite_freecam {settings:{"block_spectating":1b}} run data modify storage unfinite_freecam settings.dialog.buttons[2] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Spectating in Blocks:","color": "aqua"},{"text":" ‚úî","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled, players can fly through blocks while using the freecam"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 302"}}
execute if data storage unfinite_freecam {settings:{"block_spectating":0b}} run data modify storage unfinite_freecam settings.dialog.buttons[2] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Spectating in Blocks:","color": "aqua"},{"text":" ‚ùå","color": "red"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled, players can fly through blocks while using the freecam"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 301"}}

execute if data storage unfinite_freecam {settings:{"block_darkness":1b}} run data modify storage unfinite_freecam settings.dialog.buttons[3] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Darkness in Blocks:","color": "aqua"},{"text":" ‚úî","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled, players get the darkness effect in blocks"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 402"}}
execute if data storage unfinite_freecam {settings:{"block_darkness":0b}} run data modify storage unfinite_freecam settings.dialog.buttons[3] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Darkness in Blocks:","color": "aqua"},{"text":" ‚ùå","color": "red"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled, players get the darkness effect in blocks"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 401"}}

execute if data storage unfinite_freecam {settings:{"nametag":1b}} run data modify storage unfinite_freecam settings.dialog.buttons[4] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Show Nametag:","color": "aqua"},{"text":" ‚úî","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Toggles the visibility of mannequin nametags\n"},{"color":"dark_gray","text":"(When looking at a mannequin directly, it is always visibe)"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 502"}}
execute if data storage unfinite_freecam {settings:{"nametag":0b}} run data modify storage unfinite_freecam settings.dialog.buttons[4] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Show Nametag:","color": "aqua"},{"text":" ‚ùå","color": "red"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Toggles the visibility of mannequin nametags\n"},{"color":"dark_gray","text":"(When looking at a mannequin directly, it is always visibe)"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 501"}}

execute if data storage unfinite_freecam {settings:{"waypoints":1b}} run data modify storage unfinite_freecam settings.dialog.buttons[5] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Apears in Locatorbar:","color": "aqua"},{"text":" ‚úî","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Toggles mannequins appearing on the locatorbar"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 602"}}
execute if data storage unfinite_freecam {settings:{"waypoints":0b}} run data modify storage unfinite_freecam settings.dialog.buttons[5] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Apears in Locatorbar:","color": "aqua"},{"text":" ‚ùå","color": "red"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"Toggles mannequins appearing on the locatorbar"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 601"}}

execute if data storage unfinite_freecam {settings:{"vehicle_move":1b}} run data modify storage unfinite_freecam settings.dialog.buttons[6] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Vehicle Movement:","color": "aqua"},{"text":" ‚úî","color": "green"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled, players arn't kicked out of freecam while moving in a vehicle entity"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 702"}}
execute if data storage unfinite_freecam {settings:{"vehicle_move":0b}} run data modify storage unfinite_freecam settings.dialog.buttons[6] set value {"label":[{"text": "üßæ","color":"#C4C4C4"},{"text":" Vehicle Movement:","color": "aqua"},{"text":" ‚ùå","color": "red"}],tooltip:[{"color":"aqua","italic":false,"text":"‚û° "},{"color":"gray","text":"If enabled, players arn't kicked out of freecam while moving in a vehicle entity"}],"action": {"type": "run_command","command": "trigger unfinite-freecam.settings set 701"}}


execute if score @s unfinite-freecam.settings matches 1 run tag @s remove unfinite_freecam_settings
execute if score @s unfinite-freecam.settings matches 1 run dialog clear @s
execute if score @s unfinite-freecam.settings matches 1 run execute unless entity @a[tag=unfinite_freecam_settings] run execute if data storage unfinite_freecam {gamerule:{"send_command":1}} run gamerule send_command_feedback true

execute if score @s unfinite-freecam.settings matches 2 run function unfinite-freecam:system/dialog/export_settings with storage unfinite_freecam settings

scoreboard players reset @s unfinite-freecam.settings
function unfinite-freecam:system/dialog/show with storage unfinite_freecam settings.dialog